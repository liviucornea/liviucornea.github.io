import {Component, OnInit} from 'angular2/core';
import {JsonEdit} from "../../../widgets/jsonEdit/json.edit.component";
import {FORM_DIRECTIVES} from 'angular2/common';
import {AlertService} from "../../../../ReusableServices/alertService";

@Component({
    templateUrl: 'app/Datahub/routes/schematic/jsonPlugin/testJsonPlugin.html',
    directives: [JsonEdit, FORM_DIRECTIVES]
})
export class TestJsonPlugin implements OnInit {
    constructor(private alert:AlertService) {
        //alert("In edit constructor");
    }

    theJsonEntry:any;
    jsonInputValues;
    editJson:boolean = false;

    ngOnInit() {
        this.theJsonEntry = JSON.stringify({"Source":"E:\\TdsHub\\Core\\FileProcess\\Import\\BBG\\AIMXML\\Tran\\BBGAck_SingleTran_branka1141.xml",
            "TempFilePath":"\\\\Tdam-AAtdh-Cp01\\SqlXmlTemp\\",
            "PreProcess":"",
            "PosProcess":"",
            "ConnectionString":"Persist Security Info=False;Data Source=tdbk-sqlda-tdh;User ID=centraldb;Password=centraldb;Initial Catalog=centraldb;Application Name=XLayer;provider=SQLOLEDB"}
        );

this.theJsonEntry = '[[{"DocPart" : "1", "Order" : "0", "ColumnDescription" : "HEADER_TRAILER_ID", "TableColumn" : "HEADER_TRAILER_ID", "StartPosition" : "0", "Length" : "2", "SourceDataRequired" : "1", "Format" : "", "DataType" : "", "TextQualifier" : "", "TrailRows" : "0", "OnFormatErrorSkipRecord" : "0", "Alignment" : " ", "Padded" : "", "HashTotal" : "None"}, {"DocPart" : "1", "Order" : "1", "ColumnDescription" : "CLIENT_ID", "TableColumn" : "CLIENT_ID", "StartPosition" : "2", "Length" : "15", "SourceDataRequired" : "1", "Format" : "", "DataType" : "", "TextQualifier" : "", "TrailRows" : "0", "OnFormatErrorSkipRecord" : "0", "Alignment" : " ", "Padded" : "", "HashTotal" : "None"}, {"DocPart" : "1", "Order" : "2", "ColumnDescription" : "CREATE_DATE_TIME", "TableColumn" : "CREATE_DATE_TIME", "StartPosition" : "17", "Length" : "14", "SourceDataRequired" : "1", "Format" : "", "DataType" : "", "TextQualifier" : "", "TrailRows" : "1", "OnFormatErrorSkipRecord" : "0", "Alignment" : " ", "Padded" : "", "HashTotal" : "None"}], [{"DocPart" : "2", "Order" : "0", "ColumnDescription" : "BlockOrderNo", "TableColumn" : "BlockOrderNo", "StartPosition" : "0", "Length" : "10", "SourceDataRequired" : "1", "Format" : "", "DataType" : "", "TextQualifier" : "", "TrailRows" : "0", "OnFormatErrorSkipRecord" : "0", "Alignment" : " ", "Padded" : "", "HashTotal" : "None"}, {"DocPart" : "2", "Order" : "1", "ColumnDescription" : "TradeType", "TableColumn" : "TradeType", "StartPosition" : "10", "Length" : "2", "SourceDataRequired" : "1", "Format" : "", "DataType" : "", "TextQualifier" : "", "TrailRows" : "0", "OnFormatErrorSkipRecord" : "0", "Alignment" : " ", "Padded" : "", "HashTotal" : "None"}, {"DocPart" : "2", "Order" : "2", "ColumnDescription" : "SecIdType", "TableColumn" : "SecIdType", "StartPosition" : "12", "Length" : "2", "SourceDataRequired" : "1", "Format" : "", "DataType" : "", "TextQualifier" : "", "TrailRows" : "0", "OnFormatErrorSkipRecord" : "0", "Alignment" : " ", "Padded" : "", "HashTotal" : "None"}, {"DocPart" : "2", "Order" : "3", "ColumnDescription" : "CUSIP", "TableColumn" : "CUSIP", "StartPosition" : "14", "Length" : "12", "SourceDataRequired" : "1", "Format" : "", "DataType" : "", "TextQualifier" : "", "TrailRows" : "0", "OnFormatErrorSkipRecord" : "0", "Alignment" : " ", "Padded" : "", "HashTotal" : "None"}, {"DocPart" : "2", "Order" : "4", "ColumnDescription" : "ActivityCode", "TableColumn" : "ActivityCode", "StartPosition" : "26", "Length" : "20", "SourceDataRequired" : "1", "Format" : "", "DataType" : "", "TextQualifier" : "", "TrailRows" : "0", "OnFormatErrorSkipRecord" : "0", "Alignment" : " ", "Padded" : "", "HashTotal" : "None"}, {"DocPart" : "2", "Order" : "5", "ColumnDescription" : "ActivityDescription", "TableColumn" : "ActivityDescription", "StartPosition" : "46", "Length" : "60", "SourceDataRequired" : "1", "Format" : "", "DataType" : "", "TextQualifier" : "", "TrailRows" : "0", "OnFormatErrorSkipRecord" : "0", "Alignment" : " ", "Padded" : "", "HashTotal" : "None"}, {"DocPart" : "2", "Order" : "6", "ColumnDescription" : "ActivityDate", "TableColumn" : "ActivityDate", "StartPosition" : "106", "Length" : "8", "SourceDataRequired" : "1", "Format" : "", "DataType" : "", "TextQualifier" : "", "TrailRows" : "0", "OnFormatErrorSkipRecord" : "0", "Alignment" : " ", "Padded" : "", "HashTotal" : "None"}, {"DocPart" : "2", "Order" : "7", "ColumnDescription" : "ActivityTime", "TableColumn" : "ActivityTime", "StartPosition" : "114", "Length" : "6", "SourceDataRequired" : "1", "Format" : "", "DataType" : "", "TextQualifier" : "", "TrailRows" : "0", "OnFormatErrorSkipRecord" : "0", "Alignment" : " ", "Padded" : "", "HashTotal" : "None"}, {"DocPart" : "2", "Order" : "8", "ColumnDescription" : "ActivityNo", "TableColumn" : "ActivityNo", "StartPosition" : "120", "Length" : "12", "SourceDataRequired" : "1", "Format" : "", "DataType" : "", "TextQualifier" : "", "TrailRows" : "0", "OnFormatErrorSkipRecord" : "0", "Alignment" : " ", "Padded" : "", "HashTotal" : "None"}, {"DocPart" : "2", "Order" : "9", "ColumnDescription" : "OmsOrderId", "TableColumn" : "OmsOrderId", "StartPosition" : "132", "Length" : "12", "SourceDataRequired" : "1", "Format" : "", "DataType" : "", "TextQualifier" : "", "TrailRows" : "0", "OnFormatErrorSkipRecord" : "0", "Alignment" : " ", "Padded" : "", "HashTotal" : "None"}, {"DocPart" : "2", "Order" : "10", "ColumnDescription" : "MarketOrderId", "TableColumn" : "MarketOrderId", "StartPosition" : "144", "Length" : "12", "SourceDataRequired" : "1", "Format" : "", "DataType" : "", "TextQualifier" : "", "TrailRows" : "0", "OnFormatErrorSkipRecord" : "0", "Alignment" : " ", "Padded" : "", "HashTotal" : "None"}, {"DocPart" : "2", "Order" : "11", "ColumnDescription" : "SharesTraded", "TableColumn" : "SharesTraded", "StartPosition" : "156", "Length" : "16", "SourceDataRequired" : "1", "Format" : "", "DataType" : "", "TextQualifier" : "", "TrailRows" : "0", "OnFormatErrorSkipRecord" : "0", "Alignment" : " ", "Padded" : "", "HashTotal" : "None"}, {"DocPart" : "2", "Order" : "12", "ColumnDescription" : "SharesRemaining", "TableColumn" : "SharesRemaining", "StartPosition" : "172", "Length" : "16", "SourceDataRequired" : "1", "Format" : "", "DataType" : "", "TextQualifier" : "", "TrailRows" : "0", "OnFormatErrorSkipRecord" : "0", "Alignment" : " ", "Padded" : "", "HashTotal" : "None"}, {"DocPart" : "2", "Order" : "13", "ColumnDescription" : "Price", "TableColumn" : "Price", "StartPosition" : "188", "Length" : "16", "SourceDataRequired" : "1", "Format" : "", "DataType" : "", "TextQualifier" : "", "TrailRows" : "0", "OnFormatErrorSkipRecord" : "0", "Alignment" : " ", "Padded" : "", "HashTotal" : "None"}, {"DocPart" : "2", "Order" : "14", "ColumnDescription" : "OmsBroker", "TableColumn" : "OmsBroker", "StartPosition" : "204", "Length" : "20", "SourceDataRequired" : "1", "Format" : "", "DataType" : "", "TextQualifier" : "", "TrailRows" : "0", "OnFormatErrorSkipRecord" : "0", "Alignment" : " ", "Padded" : "", "HashTotal" : "None"}, {"DocPart" : "2", "Order" : "15", "ColumnDescription" : "CommissionBasis", "TableColumn" : "CommissionBasis", "StartPosition" : "224", "Length" : "1", "SourceDataRequired" : "1", "Format" : "", "DataType" : "", "TextQualifier" : "", "TrailRows" : "0", "OnFormatErrorSkipRecord" : "0", "Alignment" : " ", "Padded" : "", "HashTotal" : "None"}, {"DocPart" : "2", "Order" : "16", "ColumnDescription" : "CommissionRate", "TableColumn" : "CommissionRate", "StartPosition" : "225", "Length" : "13", "SourceDataRequired" : "1", "Format" : "", "DataType" : "", "TextQualifier" : "", "TrailRows" : "0", "OnFormatErrorSkipRecord" : "0", "Alignment" : " ", "Padded" : "", "HashTotal" : "None"}, {"DocPart" : "2", "Order" : "17", "ColumnDescription" : "SettleDateOverride", "TableColumn" : "SettleDateOverride", "StartPosition" : "238", "Length" : "6", "SourceDataRequired" : "1", "Format" : "", "DataType" : "", "TextQualifier" : "", "TrailRows" : "1", "OnFormatErrorSkipRecord" : "0", "Alignment" : " ", "Padded" : "", "HashTotal" : "None"}], [{"DocPart" : "3", "Order" : "0", "ColumnDescription" : "HEADER_TRAILER_ID", "TableColumn" : "HEADER_TRAILER_ID", "StartPosition" : "0", "Length" : "2", "SourceDataRequired" : "1", "Format" : "", "DataType" : "", "TextQualifier" : "", "TrailRows" : "0", "OnFormatErrorSkipRecord" : "0", "Alignment" : " ", "Padded" : "", "HashTotal" : "None"}, {"DocPart" : "3", "Order" : "1", "ColumnDescription" : "CLIENT_ID", "TableColumn" : "CLIENT_ID", "StartPosition" : "2", "Length" : "15", "SourceDataRequired" : "1", "Format" : "", "DataType" : "", "TextQualifier" : "", "TrailRows" : "0", "OnFormatErrorSkipRecord" : "0", "Alignment" : " ", "Padded" : "", "HashTotal" : "None"}, {"DocPart" : "3", "Order" : "2", "ColumnDescription" : "CREATE_DATE_TIME", "TableColumn" : "CREATE_DATE_TIME", "StartPosition" : "17", "Length" : "14", "SourceDataRequired" : "1", "Format" : "", "DataType" : "", "TextQualifier" : "", "TrailRows" : "0", "OnFormatErrorSkipRecord" : "0", "Alignment" : " ", "Padded" : "", "HashTotal" : "None"}, {"DocPart" : "3", "Order" : "3", "ColumnDescription" : "RECORD_COUNT", "TableColumn" : "RECORD_COUNT", "StartPosition" : "31", "Length" : "6", "SourceDataRequired" : "1", "Format" : "", "DataType" : "", "TextQualifier" : "", "TrailRows" : "1", "OnFormatErrorSkipRecord" : "0", "Alignment" : "r", "Padded" : "", "HashTotal" : "None"}]]';



        this.jsonInputValues= JSON.stringify({"SrcTable":{"type":"string","values":["tblCoreTransaction","tblCoreTransaction2","tblCoreTransaction3"]},
            "PreProcess":{"values":["preprocessValue"]},"PostProcess":{"values":["postprocesValue"]},"ImportDate":"2016/05/30","NewImportId":"2555",
            "Source":{"value":"TheSource","readOnly":false}});
     //   this.jsonInputValues=null;
        this.jsonInputValues= JSON.stringify({"DocPart" :{"value": "1", "readOnly": true}, "Order" : "0", "ColumnDescription" : "HEADER_TRAILER_ID", "TableColumn" : "HEADER_TRAILER_ID", "StartPosition" : "0", "Length" : "2", "SourceDataRequired" : "1", "Format" : "", "DataType" : "", "TextQualifier" : "", "TrailRows" : "0", "OnFormatErrorSkipRecord" : "0", "Alignment" : " ", "Padded" : "", "HashTotal" : "None"});
    };

    hideEdit() {
        this.editJson = false;

    }
    getJson(event){
        //this.alert.addAlert(JSON.stringify(event));

        this.theJsonEntry = event.value;
    }

}